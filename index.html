<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="description" content="Thinking-while-Generating: Interleaving Textual Reasoning throughout Visual Generation">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thinking-while-Generating</title>

  <link rel="icon" href="static/images/logo.png" type="image/png">

  <link href="https://fonts.googleapis.com/css?family=Google+Sans:400,500,700|Noto+Sans:400,500" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root {
      --color-primary: #F6B36A;
      --color-primary-dark: #E67E22;
      --color-text: #2c3e50;
      --color-bg: #FAFAFA;
      
      --color-think: #F3E060;
      --color-gen: #4FB6B8;
      --color-ref: #9C7BD8;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Google Sans', sans-serif;
      color: var(--color-text);
      background-color: var(--color-bg);
      line-height: 1.6;
      margin: 0;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Header */
    .header-container { text-align: center; margin-bottom: 40px; }
    
    .title {
      font-size: 2.5rem;
      line-height: 1.1;
      background: -webkit-linear-gradient(45deg, #F6B36A, #d35400);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1.5rem;
      font-weight: 800;
    }

    .author-block { font-size: 1.15rem; margin-bottom: 8px; }
    .author-block a { color: #222; text-decoration: none; border-bottom: 1px dotted #888; transition: 0.2s; }
    .author-block a:hover { color: var(--color-primary-dark); }
    
    .affiliation-block { font-size: 1rem; color: #666; margin-bottom: 2rem; }
    .note { font-size: 0.85rem; color: #999; }

    /* Buttons */
    .publication-links {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .link-block a {
      display: inline-flex;
      align-items: center;
      background: #363636;
      color: #fff;
      padding: 10px 24px;
      border-radius: 99px;
      text-decoration: none;
      font-size: 1rem;
      font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .link-block a:hover {
      background: var(--color-primary);
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.15);
    }
    .icon { margin-right: 8px; }

    /* Sections */
    .section {
      background: #fff;
      padding: 35px; /* Slightly adjusted padding */
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.03);
      margin-bottom: 35px;
    }
    .section-title {
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 25px;
      position: relative;
      font-weight: 700;
      color: #444;
    }
    .section-title::after {
      content: ''; display: block; width: 50px; height: 4px;
      background: var(--color-primary); margin: 12px auto 0; border-radius: 2px;
    }

    .content-text {
      font-size: 1.1rem;
      text-align: justify;
      color: #4a4a4a;
    }
    .highlight-term { color: var(--color-primary-dark); font-weight: 700; }

    /* Images */
    .image-container { text-align: center; margin: 10px 0; }
    .image-container img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    .teaser-img { width: 60%; } 
    
    .caption {
      font-size: 0.95rem;
      color: #666;
      margin-top: 15px;
      text-align: center;
      font-style: italic;
      max-width: 90%;
      margin: 15px auto 0 auto;
    }

    /* --- Method Grid (Fixed Wrapping Issue) --- */
    .method-grid {
      display: grid;
      /* Changed from 300px to 240px to ensure 3 columns fit in 1000px container */
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); 
      gap: 20px;
      margin-top: 30px;
    }
    .method-card {
      background: #fff;
      border: 1px solid #eee;
      padding: 25px;
      border-radius: 12px;
      transition: transform 0.2s;
    }
    .method-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }
    
    .method-think { border-top: 5px solid var(--color-think); }
    .method-gen   { border-top: 5px solid var(--color-gen); }
    .method-ref   { border-top: 5px solid var(--color-ref); }

    .method-card h3 { 
      margin-top: 0; 
      font-size: 1.25rem; 
      color: #333; 
      margin-bottom: 10px;
    }
    
    .badge {
      display: inline-block; 
      padding: 4px 10px; 
      border-radius: 6px;
      font-size: 0.75rem; 
      font-weight: bold; 
      text-transform: uppercase; 
      letter-spacing: 0.5px;
      margin-bottom: 10px; 
      color: #fff;
      white-space: nowrap; /* Prevents text inside badge from wrapping */
    }

    /* Visualizations */
    .vis-card {
      margin-bottom: 40px;
      padding: 30px;
      border-radius: 16px;
      text-align: center;
      background: #fff;
      border: 1px solid rgba(0,0,0,0.04);
      box-shadow: 0 4px 20px rgba(0,0,0,0.04);
      transition: transform 0.3s;
    }
    .vis-card:hover { transform: scale(1.005); box-shadow: 0 8px 30px rgba(0,0,0,0.08); }

    .vis-header {
      display: inline-block;
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 15px;
      padding: 6px 18px;
      border-radius: 50px;
    }

    /* BibTeX */
    pre {
      background-color: #2d2d2d;
      color: #ccc;
      padding: 20px;
      border-radius: 10px;
      font-size: 0.85rem;
      overflow-x: auto;
      line-height: 1.5;
      border: 1px solid #444;
    }

    @media (max-width: 768px) {
      .title { font-size: 2rem; }
      .teaser-img { width: 100%; }
      .container { padding: 20px 15px; }
    }
  </style>
</head>
<body>

<div class="container">

  <div class="header-container">
    <h1 class="title">
      <i>Thinking-while-Generating:</i><br>
      Interleaving Textual Reasoning throughout Visual Generation
    </h1>

    <div class="author-block">
      <span>Ziyu Guo<sup>*1</sup></span>,
      <span>Renrui Zhang<sup>†*2</sup></span>,
      <span>Hongyu Li<sup>*3</sup></span>,
      <span>Manyuan Zhang<sup>†3</sup></span>,
      <span>Xinyan Chen<sup>2</sup></span>
    </div>
    <div class="author-block">
      <span>Sifan Wang</span>,
      <span>Yan Feng<sup>3</sup></span>,
      <span>Peng Pei<sup>3</sup></span>,
      <span>Pheng-Ann Heng<sup>1</sup></span>
    </div>

    <div class="affiliation-block">
      <div><sup>1</sup>CUHK IMIXR &nbsp;&&nbsp; <sup>2</sup>MMLab &nbsp; <sup>3</sup>Meituan</div>
      <div class="note"><sup>*</sup>Equal Contribution &nbsp; <sup>†</sup>Project Lead</div>
    </div>

    <div class="publication-links">
      <span class="link-block">
        <a href="https://arxiv.org/abs/YOUR_PAPER_ID" target="_blank">
          <span class="icon"><i class="fas fa-file-pdf"></i></span>
          <span>Paper</span>
        </a>
      </span>
      <span class="link-block">
        <a href="https://github.com/ZiyuGuo99/Thinking-while-Generating" target="_blank">
          <span class="icon"><i class="fab fa-github"></i></span>
          <span>Code</span>
        </a>
      </span>
      <span class="link-block">
        <a href="https://huggingface.co/" target="_blank">
          <span class="icon"><i class="fas fa-database"></i></span>
          <span>TwiG-50K Dataset</span>
        </a>
      </span>
    </div>
  </div>

  <div class="section">
    <div class="image-container">
      <img src="static/images/teaser.gif" alt="Teaser Image" class="teaser-img">
    </div>
    <div class="caption">
      <strong>Interleaving Textual Reasoning throughout Visual Generation.</strong> We weave textual thoughts into the unfolding canvas, delivering on-the-fly guidance and reflection throughout synthesis.
    </div>
  </div>

  <div class="section">
    <h2 class="section-title">Abstract</h2>
    <div class="content-text">
      <p>
        Recent advances in visual generation have increasingly explored the integration of reasoning capabilities. They incorporate textual reasoning, i.e., <em>think</em>, either before (as pre-planning) or after (as post-refinement) the generation process, yet they lack on-the-fly multimodal interaction during the generation itself.
      </p>
      <p>
        In this preliminary study, we introduce <span class="highlight-term">Thinking-while-Generating (TwiG)</span>, the first interleaved framework that enables <strong>co-evolving textual reasoning</strong> throughout the visual generation process. As visual content is progressively generating, textual reasoning is interleaved to both <strong>guide upcoming local regions</strong> and <strong>reflect on previously synthesized ones</strong>. This dynamic interplay produces more context-aware and semantically rich visual outputs.
      </p>
      <p>
        To unveil the potential of this framework, we investigate three candidate strategies: <strong>zero-shot prompting</strong>, <strong>supervised fine-tuning (SFT)</strong> on our curated TwiG-50K dataset, and <strong>reinforcement learning (RL)</strong> via a customized TwiG-GRPO strategy.
      </p>
    </div>
  </div>

  <div class="section">
    <h2 class="section-title">Framework</h2>
    
    <div class="image-container">
      <img src="static/images/pipeline.png" alt="TwiG Pipeline">
    </div>
    <div class="caption">
      <strong>Overall Pipeline.</strong> TwiG decouples generation into scheduling, reasoning, and reflection.
    </div>

    <div class="method-grid">
      <div class="method-card method-think">
        <span class="badge" style="background: var(--color-think); color: #555;">Scheduling</span>
        <h3>When to Think</h3>
        <p>
          The model determines an interleaved reasoning schedule $\mathcal{S}$ to decouple the generation process into controllable sub-tasks.
          <br><br>
          $$ \mathcal{S} = \mathrm{ULM}_{u}(T) $$
        </p>
      </div>

      <div class="method-card method-gen">
        <span class="badge" style="background: var(--color-gen);">Reasoning</span>
        <h3>What to Say</h3>
        <p>
          At each step $k$, a textual thought $\tau_k$ is generated to guide the local visual region $\mathcal{V}_k$, conditioned on all previous context.
          <br><br>
          $$ \tau_k = \mathrm{ULM}_{u}(T, \{\tau_j\}_{j \lt k}, \{\mathcal{V}_j\}_{j \lt k}) $$
        </p>
      </div>

      <div class="method-card method-ref">
        <span class="badge" style="background: var(--color-ref);">Reflection</span>
        <h3>How to Refine</h3>
        <p>
          Before the next step, a critique $c_k$ is generated. If the score is low, a local reflection is triggered to refine the region $\hat{\mathcal{V}}_k$.
          <br><br>
          $$ c_k = \mathrm{ULM}_{u}(T, \{\tau_j\}_{j \leq k}, \{\mathcal{V}_j\}_{j \leq k}) $$
        </p>
      </div>
    </div>
  </div>

  <div class="section" id="visuals" style="background: transparent; box-shadow: none; padding: 0;">
    <h2 class="section-title">Visualizations</h2>

    <div class="vis-card">
      <div class="vis-header" style="background: #FFF3E0; color: #E67E22;">
        <i class="fas fa-exchange-alt"></i> Qualitative Comparison
      </div>
      <div class="image-container">
        <img src="static/images/comp.png" alt="Comparison">
      </div>
      <div class="caption">
        Comparison of the baseline (Janus-Pro-7B), TwiG-ZS, -SFT, and <strong>TwiG-RL</strong>. Our method demonstrates progressive improvements in compositional fidelity, object counting, and visual realism.
      </div>
    </div>

    <div class="vis-card">
      <div class="vis-header" style="background: #F3E5F5; color: #8E24AA;">
        <i class="fas fa-magic"></i> Reflection Capacity
      </div>
      <div class="image-container">
        <img src="static/images/reflect.png" alt="Reflection">
      </div>
      <div class="caption">
        The reflection within our <em>Thinking-while-Generating</em> refines both semantic and visual consistency, e.g., improving spatial alignment, shadow coherence, and overall realism across diverse prompts.
      </div>
    </div>

    <div class="vis-card">
      <div class="vis-header" style="background: #E1F5FE; color: #0288D1;">
        <i class="fas fa-brain"></i> The Thinking Process
      </div>
      <div class="image-container">
        <img src="static/images/supp_vis.png" alt="Thinking Process">
      </div>
      <div class="caption">
        <strong>Process of TwiG-RL.</strong> Each example showcases how the model iteratively interleaves its textual reasoning and visual outputs, progressively improving compositional accuracy.
      </div>
    </div>

  </div>

  <div class="section">
    <h2 class="section-title">BibTeX</h2>
    <pre><code>@article{guo2026thinking,
  title={Thinking-while-Generating: Interleaving Textual Reasoning throughout Visual Generation},
  author={Guo, Ziyu and Zhang, Renrui and Li, Hongyu and Zhang, Manyuan and Chen, Xinyan and Wang, Sifan and Feng, Yan and Pei, Peng and Heng, Pheng-Ann},
  journal={arXiv preprint},
  year={2026}
}</code></pre>
  </div>

  <footer style="text-align: center; padding: 30px 0; color: #999; font-size: 0.9rem;">
    <p>Copyright &copy; 2026 TwiG Project. <br>
    <span style="font-size: 0.8rem;">Design inspired by <a href="https://github.com/nerfies/nerfies.github.io" style="color: #999;">Nerfies</a>.</span>
    </p>
  </footer>

</div>

</body>
</html>
